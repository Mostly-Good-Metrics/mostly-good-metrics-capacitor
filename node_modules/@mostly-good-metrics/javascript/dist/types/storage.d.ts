import { EventProperties, IEventStorage, MGMEvent } from './types';
/**
 * In-memory event storage implementation.
 * Used as a fallback when localStorage is not available,
 * or for testing purposes.
 */
export declare class InMemoryEventStorage implements IEventStorage {
    private events;
    private maxEvents;
    constructor(maxEvents?: number);
    store(event: MGMEvent): Promise<void>;
    fetchEvents(limit: number): Promise<MGMEvent[]>;
    removeEvents(count: number): Promise<void>;
    eventCount(): Promise<number>;
    clear(): Promise<void>;
    /**
     * Update the maximum number of stored events.
     */
    setMaxEvents(maxEvents: number): void;
}
/**
 * LocalStorage-based event storage implementation.
 * Persists events across page reloads and browser restarts.
 */
export declare class LocalStorageEventStorage implements IEventStorage {
    private maxEvents;
    private events;
    constructor(maxEvents?: number);
    private loadEvents;
    private saveEvents;
    store(event: MGMEvent): Promise<void>;
    fetchEvents(limit: number): Promise<MGMEvent[]>;
    removeEvents(count: number): Promise<void>;
    eventCount(): Promise<number>;
    clear(): Promise<void>;
    /**
     * Update the maximum number of stored events.
     */
    setMaxEvents(maxEvents: number): void;
}
/**
 * Create the appropriate storage implementation based on the environment.
 */
export declare function createDefaultStorage(maxEvents: number): IEventStorage;
/**
 * Persistence helpers for user ID and app version.
 * These use localStorage when available, otherwise fall back to in-memory.
 */
declare class PersistenceManager {
    private inMemoryUserId;
    private inMemoryAppVersion;
    private inMemorySuperProperties;
    /**
     * Get the persisted user ID.
     */
    getUserId(): string | null;
    /**
     * Set the user ID (persists across sessions).
     */
    setUserId(userId: string | null): void;
    /**
     * Get the persisted app version (for detecting updates).
     */
    getAppVersion(): string | null;
    /**
     * Set the app version.
     */
    setAppVersion(version: string | null): void;
    /**
     * Check if this is the first time the app has been opened.
     * Uses localStorage to detect first-ever installation.
     */
    isFirstLaunch(): boolean;
    /**
     * Get all super properties.
     */
    getSuperProperties(): EventProperties;
    /**
     * Set a single super property.
     */
    setSuperProperty(key: string, value: EventProperties[string]): void;
    /**
     * Set multiple super properties at once.
     */
    setSuperProperties(properties: EventProperties): void;
    /**
     * Remove a single super property.
     */
    removeSuperProperty(key: string): void;
    /**
     * Clear all super properties.
     */
    clearSuperProperties(): void;
    private saveSuperProperties;
}
export declare const persistence: PersistenceManager;
export {};
//# sourceMappingURL=storage.d.ts.map